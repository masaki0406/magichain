# QA Checklist (Lobby / Save-Load / Reconnect)

> Date: 2026-01-15

## 1. ルーム作成〜参加
- [ ] ホスト端末で「ルーム作成」を押すと `games/{roomId}` が作成される
- [ ] `memberIds` にホストUIDが追加される
- [ ] 別端末で「ルーム参加」すると `memberIds` が追加される

## 2. キャラ選択開始（ホスト）
- [ ] 作成直後はキャラ選択UIが無効（待機表示）
- [ ] ホストの「キャラクター選択を開始」で `lifecycleStage=character_select`
- [ ] 参加者側のキャラ選択UIが有効になる

## 3. キャラ選択・READY
- [ ] キャラ選択で `ownerUid` が更新される
- [ ] READY ボタンが有効になる
- [ ] 全員 READY で「ゲーム開始」ボタンが有効化される

## 4. ゲーム開始（全員遷移）
- [ ] ホストが開始 → 全員が盤面へ自動遷移
- [ ] `status=in_progress` / `lifecycleStage=in_progress` が反映される

## 5. 盤面↔ロビー往復
- [ ] 盤面メニュー「Lobby」でロビーに留まれる
- [ ] ロビーの「ゲーム盤面へ戻る」で盤面へ戻れる
- [ ] ロビー滞在中に即盤面へ戻されない（override が効く）

## 6. 再接続（ルームID + プレイヤー名）
- [ ] ブラウザ再起動後、ルームID + プレイヤー名で参加できる
- [ ] 同名キャラが自動で引き継がれる
- [ ] 引き継ぎ後に盤面へ戻れる

## 7. セーブ / ロード
- [ ] セーブ押下で確認モーダルが表示される
- [ ] セーブ実行で `games/{roomId}/saves/{slotId}` が作成される
- [ ] ロード押下で確認モーダルが表示される
- [ ] ロード実行でゲーム/プレイヤーデータが復元される

## 8. ロード後のキャラ選択（重要）
- [ ] ロード後にキャラクター選択が表示される
- [ ] 「元々選ばれていないキャラ」を選んでも進行できる
- [ ] 選んだキャラの `ownerUid` / `displayName` が更新される
- [ ] その後、盤面へ遷移できる
